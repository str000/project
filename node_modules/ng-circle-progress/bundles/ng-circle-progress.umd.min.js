!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("@angular/core"),require("@angular/common"),require("rxjs")):"function"==typeof define&&define.amd?define("ng-circle-progress",["exports","@angular/core","@angular/common","rxjs"],o):o((t="undefined"!=typeof globalThis?globalThis:t||self)["ng-circle-progress"]={},t.ng.core,t.ng.common,t.rxjs)}(this,(function(t,o,n,e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */Object.create;function i(t){var o="function"==typeof Symbol&&Symbol.iterator,n=o&&t[o],e=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}function r(t,o){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var e,i,r=n.call(t),s=[];try{for(;(void 0===o||o-- >0)&&!(e=r.next()).done;)s.push(e.value)}catch(t){i={error:t}}finally{try{e&&!e.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s}function s(){for(var t=[],o=0;o<arguments.length;o++)t=t.concat(r(arguments[o]));return t}Object.create;var a=function(){this.class="",this.backgroundGradient=!1,this.backgroundColor="transparent",this.backgroundGradientStopColor="transparent",this.backgroundOpacity=1,this.backgroundStroke="transparent",this.backgroundStrokeWidth=0,this.backgroundPadding=5,this.percent=0,this.radius=90,this.space=4,this.toFixed=0,this.maxPercent=1e3,this.renderOnClick=!0,this.units="%",this.unitsFontSize="10",this.unitsFontWeight="normal",this.unitsColor="#444444",this.outerStrokeGradient=!1,this.outerStrokeWidth=8,this.outerStrokeColor="#78C000",this.outerStrokeGradientStopColor="transparent",this.outerStrokeLinecap="round",this.innerStrokeColor="#C7E596",this.innerStrokeWidth=4,this.titleFormat=void 0,this.title="auto",this.titleColor="#444444",this.titleFontSize="20",this.titleFontWeight="normal",this.subtitleFormat=void 0,this.subtitle="progress",this.subtitleColor="#A9A9A9",this.subtitleFontSize="10",this.subtitleFontWeight="normal",this.imageSrc=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.animation=!0,this.animateTitle=!0,this.animateSubtitle=!1,this.animationDuration=500,this.showTitle=!0,this.showSubtitle=!0,this.showUnits=!0,this.showImage=!1,this.showBackground=!0,this.showInnerStroke=!0,this.clockwise=!0,this.responsive=!1,this.startFromZero=!0,this.showZeroOuterStroke=!0,this.lazy=!1},p=function(){function t(t,n,p){var l=this;this.elRef=n,this.document=p,this.onClick=new o.EventEmitter,this.svgElement=null,this.isInViewport=!1,this.onViewportChanged=new o.EventEmitter,this._viewportChangedSubscriber=null,this.options=new a,this.defaultOptions=new a,this._lastPercent=0,this._gradientUUID=null,this.render=function(){l.applyOptions(),l.options.lazy?(null===l.svgElement&&l.draw(l._lastPercent),l.isInViewport&&(l.options.animation&&l.options.animationDuration>0?l.animate(l._lastPercent,l.options.percent):l.draw(l.options.percent),l._lastPercent=l.options.percent)):(l.options.animation&&l.options.animationDuration>0?l.animate(l._lastPercent,l.options.percent):l.draw(l.options.percent),l._lastPercent=l.options.percent)},this.polarToCartesian=function(t,o,n,e){var i=e*Math.PI/180;return{x:t+Math.sin(i)*n,y:o-Math.cos(i)*n}},this.draw=function(t){var o,n,e,a,p,u,c=(t=void 0===t?l.options.percent:Math.abs(t))>100?100:t,d=2*l.options.radius+2*l.options.outerStrokeWidth;l.options.showBackground&&(d+=2*l.options.backgroundStrokeWidth+l.max(0,2*l.options.backgroundPadding));var h,g,m={x:d/2,y:d/2},f=m.x,y=m.y-l.options.radius,v=l.polarToCartesian(m.x,m.y,l.options.radius,360*(l.options.clockwise?c:100-c)/100);100===c&&(v.x=v.x+(l.options.clockwise?-.01:.01)),c>50?(h=(o=r(l.options.clockwise?[1,1]:[1,0],2))[0],g=o[1]):(h=(n=r(l.options.clockwise?[0,1]:[0,0],2))[0],g=n[1]);var b=l.options.animateTitle?t:l.options.percent,k=b>l.options.maxPercent?l.options.maxPercent.toFixed(l.options.toFixed)+"+":b.toFixed(l.options.toFixed),S=l.options.animateSubtitle?t:l.options.percent,x={x:m.x,y:m.y,textAnchor:"middle",color:l.options.titleColor,fontSize:l.options.titleFontSize,fontWeight:l.options.titleFontWeight,texts:[],tspans:[]};void 0!==l.options.titleFormat&&"Function"===l.options.titleFormat.constructor.name?(w=l.options.titleFormat(b))instanceof Array?x.texts=s(w):x.texts.push(w.toString()):"auto"===l.options.title?x.texts.push(k):l.options.title instanceof Array?x.texts=s(l.options.title):x.texts.push(l.options.title.toString());var w,I={x:m.x,y:m.y,textAnchor:"middle",color:l.options.subtitleColor,fontSize:l.options.subtitleFontSize,fontWeight:l.options.subtitleFontWeight,texts:[],tspans:[]};void 0!==l.options.subtitleFormat&&"Function"===l.options.subtitleFormat.constructor.name?(w=l.options.subtitleFormat(S))instanceof Array?I.texts=s(w):I.texts.push(w.toString()):l.options.subtitle instanceof Array?I.texts=s(l.options.subtitle):I.texts.push(l.options.subtitle.toString());var C={text:""+l.options.units,fontSize:l.options.unitsFontSize,fontWeight:l.options.unitsFontWeight,color:l.options.unitsColor},F=0,W=1;if(l.options.showTitle&&(F+=x.texts.length),l.options.showSubtitle&&(F+=I.texts.length),l.options.showTitle)try{for(var E=i(x.texts),O=E.next();!O.done;O=E.next()){var z=O.value;x.tspans.push({span:z,dy:l.getRelativeY(W,F)}),W++}}catch(t){e={error:t}}finally{try{O&&!O.done&&(a=E.return)&&a.call(E)}finally{if(e)throw e.error}}if(l.options.showSubtitle)try{for(var G=i(I.texts),M=G.next();!M.done;M=G.next()){z=M.value;I.tspans.push({span:z,dy:l.getRelativeY(W,F)}),W++}}catch(t){p={error:t}}finally{try{M&&!M.done&&(u=G.return)&&u.call(G)}finally{if(p)throw p.error}}null===l._gradientUUID&&(l._gradientUUID=l.uuid()),l.svg={viewBox:"0 0 "+d+" "+d,width:l.options.responsive?"100%":d,height:l.options.responsive?"100%":d,backgroundCircle:{cx:m.x,cy:m.y,r:l.options.radius+l.options.outerStrokeWidth/2+l.options.backgroundPadding,fill:l.options.backgroundColor,fillOpacity:l.options.backgroundOpacity,stroke:l.options.backgroundStroke,strokeWidth:l.options.backgroundStrokeWidth},path:{d:"M "+f+" "+y+"\n        A "+l.options.radius+" "+l.options.radius+" 0 "+h+" "+g+" "+v.x+" "+v.y,stroke:l.options.outerStrokeColor,strokeWidth:l.options.outerStrokeWidth,strokeLinecap:l.options.outerStrokeLinecap,fill:"none"},circle:{cx:m.x,cy:m.y,r:l.options.radius-l.options.space-l.options.outerStrokeWidth/2-l.options.innerStrokeWidth/2,fill:"none",stroke:l.options.innerStrokeColor,strokeWidth:l.options.innerStrokeWidth},title:x,units:C,subtitle:I,image:{x:m.x-l.options.imageWidth/2,y:m.y-l.options.imageHeight/2,src:l.options.imageSrc,width:l.options.imageWidth,height:l.options.imageHeight},outerLinearGradient:{id:"outer-linear-"+l._gradientUUID,colorStop1:l.options.outerStrokeColor,colorStop2:"transparent"===l.options.outerStrokeGradientStopColor?"#FFF":l.options.outerStrokeGradientStopColor},radialGradient:{id:"radial-"+l._gradientUUID,colorStop1:l.options.backgroundColor,colorStop2:"transparent"===l.options.backgroundGradientStopColor?"#FFF":l.options.backgroundGradientStopColor}}},this.getAnimationParameters=function(t,o){var n,e,i,r=l.options.startFromZero||t<0?0:t,s=o<0?0:l.min(o,l.options.maxPercent),a=Math.abs(Math.round(s-r));return a>=100?(n=100,e=l.options.animateTitle||l.options.animateSubtitle?Math.round(a/n):1):(n=a,e=1),(i=Math.round(l.options.animationDuration/n))<10&&(i=10,n=l.options.animationDuration/i,e=!l.options.animateTitle&&!l.options.animateSubtitle&&a>100?Math.round(100/n):Math.round(a/n)),e<1&&(e=1),{times:n,step:e,interval:i}},this.animate=function(t,o){l._timerSubscription&&!l._timerSubscription.closed&&l._timerSubscription.unsubscribe();var n=l.options.startFromZero?0:t,i=o,r=l.getAnimationParameters(n,i),s=r.step,a=r.interval,p=n;l._timerSubscription=n<i?e.timer(0,a).subscribe((function(){(p+=s)<=i?!l.options.animateTitle&&!l.options.animateSubtitle&&p>=100?(l.draw(i),l._timerSubscription.unsubscribe()):l.draw(p):(l.draw(i),l._timerSubscription.unsubscribe())})):e.timer(0,a).subscribe((function(){(p-=s)>=i?!l.options.animateTitle&&!l.options.animateSubtitle&&i>=100?(l.draw(i),l._timerSubscription.unsubscribe()):l.draw(p):(l.draw(i),l._timerSubscription.unsubscribe())}))},this.emitClickEvent=function(t){l.options.renderOnClick&&l.animate(0,l.options.percent),l.onClick.emit(t)},this.applyOptions=function(){var t,o;try{for(var n=i(Object.keys(l.options)),e=n.next();!e.done;e=n.next()){var r=e.value;l.hasOwnProperty(r)&&void 0!==l[r]?l.options[r]=l[r]:l.templateOptions&&void 0!==l.templateOptions[r]&&(l.options[r]=l.templateOptions[r])}}catch(o){t={error:o}}finally{try{e&&!e.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}l.options.radius=Math.abs(+l.options.radius),l.options.space=+l.options.space,l.options.percent=+l.options.percent>0?+l.options.percent:0,l.options.maxPercent=Math.abs(+l.options.maxPercent),l.options.animationDuration=Math.abs(l.options.animationDuration),l.options.outerStrokeWidth=Math.abs(+l.options.outerStrokeWidth),l.options.innerStrokeWidth=Math.abs(+l.options.innerStrokeWidth),l.options.backgroundPadding=+l.options.backgroundPadding},this.getRelativeY=function(t,o){return(1*(t-o/2)-.18).toFixed(2)+"em"},this.min=function(t,o){return t<o?t:o},this.max=function(t,o){return t>o?t:o},this.uuid=function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(o){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==o?n:3&n|8).toString(16)}))},this.findSvgElement=function(){if(null===this.svgElement){var t=this.elRef.nativeElement.getElementsByTagName("svg");t.length>0&&(this.svgElement=t[0])}},this.checkViewport=function(){l.findSvgElement();var t=l.isInViewport;l.isInViewport=l.isElementInViewport(l.svgElement),t!==l.isInViewport&&l.onViewportChanged.emit({oldValue:t,newValue:l.isInViewport})},this.onScroll=function(t){l.checkViewport()},this.loadEventsForLazyMode=function(){if(l.options.lazy){l.document.addEventListener("scroll",l.onScroll,!0),l.window.addEventListener("resize",l.onScroll,!0),null===l._viewportChangedSubscriber&&(l._viewportChangedSubscriber=l.onViewportChanged.subscribe((function(t){t.oldValue;t.newValue&&l.render()})));var t=e.timer(0,50).subscribe((function(){null===l.svgElement?l.checkViewport():t.unsubscribe()}))}},this.unloadEventsForLazyMode=function(){l.document.removeEventListener("scroll",l.onScroll,!0),l.window.removeEventListener("resize",l.onScroll,!0),null!==l._viewportChangedSubscriber&&(l._viewportChangedSubscriber.unsubscribe(),l._viewportChangedSubscriber=null)},this.document=p,this.window=this.document.defaultView,Object.assign(this.options,t),Object.assign(this.defaultOptions,t)}return t.prototype.isDrawing=function(){return this._timerSubscription&&!this._timerSubscription.closed},t.prototype.isElementInViewport=function(t){if(null==t)return!1;var o,n=t.getBoundingClientRect(),e=t.parentNode;do{if(o=e.getBoundingClientRect(),n.top>=o.bottom)return!1;if(n.bottom<=o.top)return!1;if(n.left>=o.right)return!1;if(n.right<=o.left)return!1;e=e.parentNode}while(e!=this.document.body);return!(n.top>=(this.window.innerHeight||this.document.documentElement.clientHeight))&&(!(n.bottom<=0)&&(!(n.left>=(this.window.innerWidth||this.document.documentElement.clientWidth))&&!(n.right<=0)))},t.prototype.ngOnInit=function(){this.loadEventsForLazyMode()},t.prototype.ngOnDestroy=function(){this.unloadEventsForLazyMode()},t.prototype.ngOnChanges=function(t){this.render(),"lazy"in t&&(t.lazy.currentValue?this.loadEventsForLazyMode():this.unloadEventsForLazyMode())},t}();p.decorators=[{type:o.Component,args:[{selector:"circle-progress",template:'\n        <svg xmlns="http://www.w3.org/2000/svg" *ngIf="svg"\n             [attr.viewBox]="svg.viewBox" preserveAspectRatio="xMidYMid meet"\n             [attr.height]="svg.height" [attr.width]="svg.width" (click)="emitClickEvent($event)" [attr.class]="options.class">\n            <defs>\n                <linearGradient *ngIf="options.outerStrokeGradient" [attr.id]="svg.outerLinearGradient.id">\n                    <stop offset="5%" [attr.stop-color]="svg.outerLinearGradient.colorStop1"  [attr.stop-opacity]="1"/>\n                    <stop offset="95%" [attr.stop-color]="svg.outerLinearGradient.colorStop2" [attr.stop-opacity]="1"/>\n                </linearGradient>\n                <radialGradient *ngIf="options.backgroundGradient" [attr.id]="svg.radialGradient.id">\n                    <stop offset="5%" [attr.stop-color]="svg.radialGradient.colorStop1" [attr.stop-opacity]="1"/>\n                    <stop offset="95%" [attr.stop-color]="svg.radialGradient.colorStop2" [attr.stop-opacity]="1"/>\n                </radialGradient>\n            </defs>\n            <ng-container *ngIf="options.showBackground">\n                <circle *ngIf="!options.backgroundGradient"\n                        [attr.cx]="svg.backgroundCircle.cx"\n                        [attr.cy]="svg.backgroundCircle.cy"\n                        [attr.r]="svg.backgroundCircle.r"\n                        [attr.fill]="svg.backgroundCircle.fill"\n                        [attr.fill-opacity]="svg.backgroundCircle.fillOpacity"\n                        [attr.stroke]="svg.backgroundCircle.stroke"\n                        [attr.stroke-width]="svg.backgroundCircle.strokeWidth"/>\n                <circle *ngIf="options.backgroundGradient"\n                        [attr.cx]="svg.backgroundCircle.cx"\n                        [attr.cy]="svg.backgroundCircle.cy"\n                        [attr.r]="svg.backgroundCircle.r"\n                        attr.fill="url(#{{svg.radialGradient.id}})"\n                        [attr.fill-opacity]="svg.backgroundCircle.fillOpacity"\n                        [attr.stroke]="svg.backgroundCircle.stroke"\n                        [attr.stroke-width]="svg.backgroundCircle.strokeWidth"/>\n            </ng-container>            \n            <circle *ngIf="options.showInnerStroke"\n                    [attr.cx]="svg.circle.cx"\n                    [attr.cy]="svg.circle.cy"\n                    [attr.r]="svg.circle.r"\n                    [attr.fill]="svg.circle.fill"\n                    [attr.stroke]="svg.circle.stroke"\n                    [attr.stroke-width]="svg.circle.strokeWidth"/>\n            <ng-container *ngIf="+options.percent!==0 || options.showZeroOuterStroke">\n                <path *ngIf="!options.outerStrokeGradient"\n                        [attr.d]="svg.path.d"\n                        [attr.stroke]="svg.path.stroke"\n                        [attr.stroke-width]="svg.path.strokeWidth"\n                        [attr.stroke-linecap]="svg.path.strokeLinecap"\n                        [attr.fill]="svg.path.fill"/>\n                <path *ngIf="options.outerStrokeGradient"\n                        [attr.d]="svg.path.d"\n                        attr.stroke="url(#{{svg.outerLinearGradient.id}})"\n                        [attr.stroke-width]="svg.path.strokeWidth"\n                        [attr.stroke-linecap]="svg.path.strokeLinecap"\n                        [attr.fill]="svg.path.fill"/>\n            </ng-container>\n            <text *ngIf="!options.showImage && (options.showTitle || options.showUnits || options.showSubtitle)"\n                  alignment-baseline="baseline"\n                  [attr.x]="svg.circle.cx"\n                  [attr.y]="svg.circle.cy"\n                  [attr.text-anchor]="svg.title.textAnchor">\n                <ng-container *ngIf="options.showTitle">\n                    <tspan *ngFor="let tspan of svg.title.tspans"\n                           [attr.x]="svg.title.x"\n                           [attr.y]="svg.title.y"\n                           [attr.dy]="tspan.dy"\n                           [attr.font-size]="svg.title.fontSize"\n                           [attr.font-weight]="svg.title.fontWeight"\n                           [attr.fill]="svg.title.color">{{tspan.span}}</tspan>\n                </ng-container>\n                <tspan *ngIf="options.showUnits"\n                       [attr.font-size]="svg.units.fontSize"\n                       [attr.font-weight]="svg.units.fontWeight"\n                       [attr.fill]="svg.units.color">{{svg.units.text}}</tspan>\n                <ng-container *ngIf="options.showSubtitle">\n                    <tspan *ngFor="let tspan of svg.subtitle.tspans"\n                           [attr.x]="svg.subtitle.x"\n                           [attr.y]="svg.subtitle.y"\n                           [attr.dy]="tspan.dy"\n                           [attr.font-size]="svg.subtitle.fontSize"\n                           [attr.font-weight]="svg.subtitle.fontWeight"\n                           [attr.fill]="svg.subtitle.color">{{tspan.span}}</tspan>\n                </ng-container>\n            </text>\n            <image *ngIf="options.showImage" preserveAspectRatio="none" \n                [attr.height]="svg.image.height"\n                [attr.width]="svg.image.width"\n                [attr.xlink:href]="svg.image.src"\n                [attr.x]="svg.image.x"\n                [attr.y]="svg.image.y"\n            />\n        </svg>\n    '}]}],p.ctorParameters=function(){return[{type:a},{type:o.ElementRef},{type:void 0,decorators:[{type:o.Inject,args:[n.DOCUMENT]}]}]},p.propDecorators={onClick:[{type:o.Output}],name:[{type:o.Input}],class:[{type:o.Input}],backgroundGradient:[{type:o.Input}],backgroundColor:[{type:o.Input}],backgroundGradientStopColor:[{type:o.Input}],backgroundOpacity:[{type:o.Input}],backgroundStroke:[{type:o.Input}],backgroundStrokeWidth:[{type:o.Input}],backgroundPadding:[{type:o.Input}],radius:[{type:o.Input}],space:[{type:o.Input}],percent:[{type:o.Input}],toFixed:[{type:o.Input}],maxPercent:[{type:o.Input}],renderOnClick:[{type:o.Input}],units:[{type:o.Input}],unitsFontSize:[{type:o.Input}],unitsFontWeight:[{type:o.Input}],unitsColor:[{type:o.Input}],outerStrokeGradient:[{type:o.Input}],outerStrokeWidth:[{type:o.Input}],outerStrokeColor:[{type:o.Input}],outerStrokeGradientStopColor:[{type:o.Input}],outerStrokeLinecap:[{type:o.Input}],innerStrokeColor:[{type:o.Input}],innerStrokeWidth:[{type:o.Input}],titleFormat:[{type:o.Input}],title:[{type:o.Input}],titleColor:[{type:o.Input}],titleFontSize:[{type:o.Input}],titleFontWeight:[{type:o.Input}],subtitleFormat:[{type:o.Input}],subtitle:[{type:o.Input}],subtitleColor:[{type:o.Input}],subtitleFontSize:[{type:o.Input}],subtitleFontWeight:[{type:o.Input}],imageSrc:[{type:o.Input}],imageHeight:[{type:o.Input}],imageWidth:[{type:o.Input}],animation:[{type:o.Input}],animateTitle:[{type:o.Input}],animateSubtitle:[{type:o.Input}],animationDuration:[{type:o.Input}],showTitle:[{type:o.Input}],showSubtitle:[{type:o.Input}],showUnits:[{type:o.Input}],showImage:[{type:o.Input}],showBackground:[{type:o.Input}],showInnerStroke:[{type:o.Input}],clockwise:[{type:o.Input}],responsive:[{type:o.Input}],startFromZero:[{type:o.Input}],showZeroOuterStroke:[{type:o.Input}],lazy:[{type:o.Input}],templateOptions:[{type:o.Input,args:["options"]}]};var l=function(){function t(){}return t.forRoot=function(o){return void 0===o&&(o={}),{ngModule:t,providers:[{provide:a,useValue:o}]}},t}();l.decorators=[{type:o.NgModule,args:[{declarations:[p],imports:[n.CommonModule],exports:[p]}]}],t.CircleProgressComponent=p,t.CircleProgressOptions=a,t.NgCircleProgressModule=l,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-circle-progress.umd.min.js.map